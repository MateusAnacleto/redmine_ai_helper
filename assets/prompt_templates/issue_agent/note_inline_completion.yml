---
_type: prompt
input_variables:
  - prefix_text
  - suffix_text
  - issue_title
  - issue_description
  - issue_status
  - issue_assigned_to
  - project_name
  - cursor_position
  - max_sentences
  - format
  - current_user_name
  - user_role
  - recent_notes
template: |-
  You are helping user "{current_user_name}" to complete a note/comment for issue "{issue_title}" in project "{project_name}".

  Issue Context:
  - Status: {issue_status}
  - Assigned to: {issue_assigned_to}
  - Description: {issue_description}

  Your Role: {user_role}
  - issue_author: You are the original creator of this issue
  - assignee: You are assigned to work on this issue  
  - participant: You have participated in previous discussions
  - new_participant: This is your first comment on this issue

  Recent Conversation History:
  {recent_notes}

  Current note being written: "{prefix_text}"
  Text after cursor: "{suffix_text}"
  Cursor position: {cursor_position}

  Important spacing rules:
  1. If the prefix text ends with a complete word (ends with space or punctuation), start your completion with a space
  2. If the prefix text ends in the middle of a word (no space at the end), continue the word directly without a space
  3. If the prefix text ends with punctuation, start with a space

  Instructions:
  - Complete the note from the cursor position, writing as "{current_user_name}" in your role as {user_role}
  - Consider the conversation history and respond appropriately to previous comments
  - Keep response relevant to the issue status and context
  - DO NOT repeat any part of "{prefix_text}"
  - Write ONLY the continuation that comes after the cursor
  - Maximum {max_sentences} sentences
  - Consider the context of suffix text: "{suffix_text}"
  - Format the text as {format}. If format is "textile", use Textile syntax. If format is "markdown", use Markdown syntax
  - Write in a natural, conversational tone appropriate for your role

  Write the continuation: