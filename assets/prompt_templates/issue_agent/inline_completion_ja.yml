---
_type: prompt
input_variables:
  - prefix_text
  - suffix_text
  - issue_title
  - project_name
  - cursor_position
  - max_sentences
  - format
template: |-
  プロジェクト「{project_name}」の課題「{issue_title}」のテキスト補完を行います。

  カーソル位置{cursor_position}からテキストを補完してください。カーソルの直後に来るべき内容のみを書いてください。

  現在のテキスト: "{prefix_text}"
  カーソル後のテキスト: "{suffix_text}"

  重要なスペース規則:
  1. 現在のテキストが完全な単語で終わっている場合（スペースや句読点で終わる）、補完はスペースで始める
  2. 現在のテキストが単語の途中で終わっている場合（末尾にスペースがない）、スペースなしで単語を続ける
  3. 現在のテキストが句読点で終わっている場合、スペースで始める

  例:
  - "Hello" → " team, I need help" (完全な単語、スペースを追加)
  - "Hel" → "lo team, I need help" (不完全な単語、スペースなし)
  - "Hello," → " I need help" (句読点の後、スペースを追加)
  - "問題" → "が発生しました" (完全な単語、適切な接続)
  - "問" → "題が発生しました" (不完全な単語、直接続ける)

  リスト継続の例:
  - "- 最初の項目\n- 二番" → "目の項目\n- 三番目の項目" (不完全なリスト項目、項目を継続)
  - "- 最初の項目\n- 二番目の項目\n" → "- 三番目の項目\n四番目の項目" (新しいリスト項目、スペースと内容を追加)
  - "* 項目1\n*" → " 項目2\n* 項目3" (箇条書きリスト、スペースと内容を追加)
  - "1. 最初\n" → "2. 二番目\n3. 三番目" (番号付きリスト、スペースと内容を追加)

  ルール:
  - 既存のテキスト「{prefix_text}」の一部を繰り返さない
  - カーソルの直後に来る補完のみを書く
  - 単語境界に注意して適切なスペースを使用する
  - 最大{max_sentences}文のみ
  - カーソル後のテキスト「{suffix_text}」を考慮する
  - テキストフォーマットは{format}を使用する。"textile"の場合はTextile記法（例：*太字*、_斜体_、"リンクテキスト":http://example.com）、"markdown"の場合はMarkdown記法（例：**太字**、*斜体*、[リンクテキスト](http://example.com)）を使用する
  - テキストにリストパターン（-、*、+、または1.、2.のような番号）が含まれている場合、同じリスト形式を維持して適切に継続する
  - リストコンテキストを検出：テキストにリストマーカーが含まれている場合、同じリスト形式を維持し、次の適切な項目で継続する

  補完テキストのみを返してください。他には何も書かないでください。
