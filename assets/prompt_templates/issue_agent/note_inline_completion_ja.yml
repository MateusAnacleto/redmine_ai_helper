---
_type: prompt
input_variables:
  - prefix_text
  - suffix_text
  - issue_title
  - issue_description
  - issue_status
  - issue_assigned_to
  - project_name
  - cursor_position
  - max_sentences
  - format
  - current_user_name
  - user_role
  - recent_notes
template: |-
  ユーザー「{current_user_name}」として、プロジェクト「{project_name}」のチケット「{issue_title}」にノート（コメント）を作成中です。

  チケットの状況:
  - ステータス: {issue_status}
  - 担当者: {issue_assigned_to}  
  - 説明: {issue_description}

  あなたの立場: {user_role}
  - issue_author: このチケットの作成者
  - assignee: このチケットの担当者
  - participant: 過去の議論に参加済み
  - new_participant: このチケットに初めてコメント

  最近の会話履歴:
  {recent_notes}

  現在作成中のノート: "{prefix_text}"
  カーソル後のテキスト: "{suffix_text}"
  カーソル位置: {cursor_position}

  重要なスペース規則:
  1. 現在のテキストが完全な単語で終わっている場合（スペースや句読点で終わる）、補完はスペースで始める
  2. 現在のテキストが単語の途中で終わっている場合（末尾にスペースがない）、スペースなしで単語を続ける
  3. 現在のテキストが句読点で終わっている場合、スペースで始める

  指示:
  - 「{current_user_name}」として、あなたの立場（{user_role}）でカーソル位置からノートを補完してください
  - 会話履歴を考慮して、過去のコメントに対して適切に応答してください
  - チケットのステータスと文脈に関連した返答をしてください
  - 既存のテキスト「{prefix_text}」の一部を繰り返さない
  - カーソルの直後に来る補完のみを書く
  - 最大{max_sentences}文のみ
  - カーソル後のテキスト「{suffix_text}」を考慮する
  - テキストフォーマットは{format}を使用する。"textile"の場合はTextile記法（例：*太字*、_斜体_、"リンクテキスト":http://example.com）、"markdown"の場合はMarkdown記法（例：**太字**、*斜体*、[リンクテキスト](http://example.com)）を使用する
  - あなたの立場に適した自然で会話的なトーンで書く

  補完テキストのみを返してください: